{{define "body"}}

{{template "header" .}}

<main class="container-fluid">
    <div id="error"></div>

    <div class="page_header">
        <h3>Upcoming Events</h3>
        <div class="buttons">
            {{if .User.CanModifyEvent}}
            <a href="/event/new" role="button">New Event</a>
            {{end}}
        </div>
    </div>

    {{if gt (len .CurrEvents) (0)}}
    <section class="card-list">
        {{range .CurrEvents}}
        <div
            class="center"
            x-data="{ start: formatTime('{{jsTime .Start}}') }"
        >
            <div class="flex-1">
                <div><strong>{{.Name}}</strong></div>
                <div>
                    <small>
                        <span x-text="start"></span> Â· {{.SpotsLeft}} spots left
                    </small>
                </div>
            </div>
            <a href="/event/{{.Id}}">View</a>
        </div>
        {{end}}
    </section>
    {{else}}
    <div>No events</div>
    {{end}}
</main>
{{end}}
